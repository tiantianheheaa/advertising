在广告投放系统中，**广告计划（ad_campaign_id）**、**广告组（ad_group_id）** 和 **广告（ad_id）** 是三个核心层级，它们通过层级关系组织广告资源，实现精细化投放管理。以下是三者的详细关系及作用：

---

### **1. 层级关系**
广告计划、广告组、广告通常构成 **三级树状结构**，层级从高到低依次为：  
**广告计划 → 广告组 → 广告**  
- **广告计划（Campaign）**：顶层策略单元，定义整体投放目标（如推广目标、预算、时间范围等）。  
- **广告组（Ad Group）**：中间层级，用于对广告进行分组管理（如按受众、定向、创意类型等细分）。  
- **广告（Ad）**：底层执行单元，包含具体的创意素材（如图片、视频、文案）和落地页。

**示例关系**：  
```
广告计划：夏季促销活动（ad_campaign_id=1001）  
├─ 广告组：女性用户定向（ad_group_id=2001）  
│  ├─ 广告：图片广告A（ad_id=3001）  
│  └─ 广告：视频广告B（ad_id=3002）  
└─ 广告组：男性用户定向（ad_group_id=2002）  
   └─ 广告：图片广告C（ad_id=3003）
```

---

### **2. 核心作用与区别**
| **层级**       | **作用**                                                                 | **关键字段示例**                     |
|----------------|--------------------------------------------------------------------------|--------------------------------------|
| **广告计划**   | 定义投放的宏观目标，控制整体预算和节奏。                                 | 推广目标（如应用下载、品牌曝光）、总预算、投放时间、出价策略。 |
| **广告组**     | 对广告进行分组管理，实现精细化定向或创意分类。                           | 受众定向（年龄、性别、兴趣）、设备类型、地域、出价调整。       |
| **广告**       | 具体执行单元，承载创意素材和落地页，直接面向用户展示。                   | 创意ID、标题、图片/视频链接、落地页URL、监测链接。            |

---

### **3. 实际应用场景**
#### **场景1：A/B测试**
- **广告计划**：测试不同创意效果（如“夏季新品推广”）。  
- **广告组**：按创意类型分组（如“图片组” vs “视频组”）。  
- **广告**：每个组下创建多个变体（如图片A、图片B；视频X、视频Y）。  
- **目的**：对比不同创意的点击率（CTR）和转化率（CVR）。

#### **场景2：多受众定向**
- **广告计划**：推广一款运动鞋（预算10万元）。  
- **广告组**：  
  - 组1：定向“18-25岁女性，兴趣健身”。  
  - 组2：定向“26-35岁男性，兴趣篮球”。  
- **广告**：每组下使用相同的创意素材（如同一款运动鞋图片）。  
- **目的**：分析不同受众的转化效果，优化定向策略。

#### **场景3：跨平台投放**
- **广告计划**：全渠道推广（如微信、抖音、微博）。  
- **广告组**：按平台分组（如“微信组”、“抖音组”）。  
- **广告**：每组下适配平台特性的创意（如微信用小图，抖音用竖版视频）。  
- **目的**：统一管理预算，同时适配不同平台的用户习惯。

---

### **4. 技术实现中的关联**
在广告系统数据库或API中，三者通常通过外键关联：  
- **广告表（ads）** 包含 `ad_group_id` 字段，指向所属广告组。  
- **广告组表（ad_groups）** 包含 `ad_campaign_id` 字段，指向所属广告计划。  

**示例SQL查询**：  
```sql
-- 查询某个广告计划下的所有广告
SELECT a.ad_id, a.ad_name 
FROM ads a
JOIN ad_groups g ON a.ad_group_id = g.ad_group_id
WHERE g.ad_campaign_id = '1001';
```

---

### **5. 常见问题**
#### **Q1：是否可以跳过广告组直接创建广告？**  
- 部分平台允许，但会失去分组管理的能力（如无法按定向优化）。建议始终使用三级结构。

#### **Q2：广告组和广告的数量限制？**  
- 不同平台限制不同（如腾讯广告单计划最多100个广告组，单组最多50个广告）。需参考具体平台文档。

#### **Q3：如何修改广告的所属组或计划？**  
- 通常可通过广告管理后台或API更新 `ad_group_id` 字段，但需注意数据迁移的影响（如历史数据统计可能断裂）。

---

### **总结**
- **广告计划**是战略层，控制整体目标和预算；  
- **广告组**是战术层，实现定向或创意分类；  
- **广告**是执行层，直接面向用户展示。  
三者通过层级关系实现广告投放的 **精细化控制** 和 **高效管理**，是广告优化（如调整出价、定向、创意）的核心操作对象。


<img width="1510" height="572" alt="image" src="https://github.com/user-attachments/assets/6f335ccf-4de1-4546-8ea6-c3d7c1c318a4" />
